(()=>{"use strict";var e,t,n,o,a,c,r,l,i,s,u,d,m,v,f;u=document.querySelector("#timer-hours"),d=document.querySelector("#timer-minutes"),m=document.querySelector("#timer-seconds"),v=setInterval((function(){var e,t,n,o=(e=(new Date("12 august 2021 15:13:00").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60),minutes:n,seconds:t});d.textContent=f(o.minutes),u.textContent=f(o.hours),m.textContent=f(o.seconds),Math.floor(o.timeRemaining)<=0&&(clearInterval(v),d.textContent="00",u.textContent="00",m.textContent="00")}),1e3),f=function(e){return e<10?"0".concat(e):e},l=document.querySelector("menu"),i=document.querySelector("main").querySelector("a"),s=function(){l.classList.toggle("active-menu")},document.addEventListener("click",(function(e){var t=e.target;if(t.closest("a")!==i||l.classList.contains("active-menu")){if(t.closest("a")===i&&l.classList.contains("active-menu")){e.preventDefault(),s();var n=i.getAttribute("href");document.querySelector(n).scrollIntoView({behavior:"smooth",block:"start"})}else if(t.closest("div.menu")||t.classList.contains("close-btn")||!t.closest("menu")&&l.classList.contains("active-menu"))e.preventDefault(),s();else if(t.closest("ul.menu")){e.preventDefault(),s();var o=t.getAttribute("href");document.querySelector(o).scrollIntoView({behavior:"smooth",block:"start"})}}else{e.preventDefault();var a=i.getAttribute("href");document.querySelector(a).scrollIntoView({behavior:"smooth",block:"start"})}})),c=document.querySelector(".popup"),r=document.querySelector(".popup-content"),document.addEventListener("click",(function(e){e.target.classList.contains("popup-btn")&&(document.documentElement.clientWidth>=768?(c.style.display="block",function(){r.style.left=0;var e,t=0;e=requestAnimationFrame((function n(){t++,e=requestAnimationFrame(n),30*t<=document.documentElement.getBoundingClientRect().width/2?r.style.left="".concat(30*t,"px"):cancelAnimationFrame(e)}))}(),c.style.height="".concat(document.documentElement.clientHeight,"px")):(c.style.display="block",r.style.left="".concat(document.documentElement.clientWidth/2,"px")))})),c.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?c.style.display="none":(t=t.closest(".popup-content"))||(c.style.display="none")})),n=document.querySelector(".service-header"),o=n.querySelectorAll(".service-header-tab"),a=document.querySelectorAll(".service-tab"),n.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&o.forEach((function(e,n){e===t&&function(e){for(var t=0;t<a.length;t++)e===t?(o[t].classList.add("active"),a[t].classList.remove("d-none")):(o[t].classList.remove("active"),a[t].classList.add("d-none"))}(n)}))})),function(){var e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content"),n=document.querySelector(".portfolio-dots");!function(){for(var t=0;t<e.length;){var o=document.createElement("li");o.classList.add("dot"),n.insertAdjacentElement("afterbegin",o),t++}}();var o,a=document.querySelectorAll(".dot"),c=0;a[0].classList.add("dot-active");var r=function(e,t,n){e[t].classList.remove(n)},l=function(e,t,n){e[t].classList.add(n)},i=function(){r(e,c,"portfolio-item-active"),r(a,c,"dot-active"),++c>=e.length&&(c=0),l(e,c,"portfolio-item-active"),l(a,c,"dot-active")},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;o=setInterval(i,e)};t.addEventListener("click",(function(t){t.preventDefault();var n=t.target;n.matches(".portfolio-btn, .dot")&&(r(e,c,"portfolio-item-active"),r(a,c,"dot-active"),n.matches("#arrow-right")?c++:n.matches("#arrow-left")?c--:n.matches(".dot")&&a.forEach((function(e,t){e===n&&(c=t)})),c>=e.length&&(c=0),c<0&&(c=e.length-1),l(e,c,"portfolio-item-active"),l(a,c,"dot-active"))})),t.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),t.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&s()})),s(1500)}(),document.querySelectorAll(".command__photo").forEach((function(e){e.addEventListener("mouseover",(function(e){t=e.target.src,e.target.src=e.target.dataset.img})),e.addEventListener("mouseout",(function(e){e.target.src=t}))})),document.addEventListener("input",(function(e){var t=e.target;t.classList.contains("calc-item")?t.value=t.value.replace(/\D\./,""):"user_name"===t.name?t.value=t.value.replace(/[^А-Яа-я ]/gi,""):"user_phone"===t.name?t.value=t.value.replace(/[^0-9+]/,""):"user_email"===t.name?(t.value=t.value.replace(/[^A-Za-z-_!~@'\.\*]/gi,""),new RegExp(/^[a-zA-Z0-9._-]+@[a-zA-Z-]+\.[a-zA-Z]{2,3}$/).test(e.target.value)||(e.target.value="",alert("Введите корректный email"))):"user_message"===t.name&&(t.value=t.value.replace(/[^А-Яа-я 0-9 \-\.\,\!\?\:\;\"]/gi,""))})),document.addEventListener("blur",(function(e){e.target.value=e.target.value.replace(/^[\s-]+/,""),e.target.value=e.target.value.replace(/[\s-]+$/,""),e.target.value=e.target.value.replace(/-+/g,"-"),e.target.value=e.target.value.replace(/\s+/g," "),"user_name"===e.target.name&&(e.target.value=e.target.value.split(" ").map((function(e){return e[0].toUpperCase()+e.toLowerCase().substring(1)})).join(" "))}),!0),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),a=document.querySelector(".calc-count"),c=document.querySelector(".calc-day"),r=document.getElementById("total"),l=function(){var t=0,l=1,i=1,s=n.options[n.selectedIndex].value,u=+o.value;a.value>1&&(l+=(a.value-1)/10),c.value&&c.value<5?i*=2:c.value&&c.value<10&&(i*=1.5),s&&u&&(t=e*s*u*l*i),r.textContent=t};t.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&l()}))}(100),(e=document.createElement("div")).style.cssText="font-size: 2rem",document.addEventListener("submit",(function(t){t.preventDefault(),t.target.appendChild(e),e.textContent="Загрузка...";var n=new FormData(t.target);t.target.reset(),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:e})}(n).then((function(t){if(200!==t.status)throw new Error("status network not 200!");e.textContent="Спасибо! Мы скоро с вами свяжемся!"})).catch((function(t){e.textContent="Что-то пошло не так...",console.error(t)}))}))})();